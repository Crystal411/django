var $R={mouseOffset:{},mouseDownTime:"",mouseUpTime:"",init:function(){this.createDom(),this.bindEvent(),this.hoverEvent(),public.init(),this.pvSend()},createDom:function(){var e=[];if(window.adsData){var t="",n=window.adsData.ads[0];n.clktk&&(t=n.clktk.join(",")),$(".go-btn-active").html('<img src="'+video_button+'">'),$(".video-wrap").prepend('<img height="'+h+'px" width="'+w+'px" class="coverBg" src="'+video_bg+'"/>'),$(".desc").html(n.desc),e.push('<img class="coverImg" src="'+n.img+'">'),e.push('<div class="video_item" data-clk="'+t+'" data-curl="'+n.curl+'">'),e.push(' <video id="video" autoplay preload loop muted src="'+n.video+'"></video>'),e.push('<div class="bottom_bg tHide"></div>'),e.push("</div>"),$("#video-Content").html(e.join(""))}},pvSend:function(){var e=this;window.adsData&&window.adsData.adstk&&$.each(window.adsData.adstk,function(t,n){e.sendLog(n)})},sendLog:function(e){var t=new Image;t.onload=t.onerror=function(){t=null},t.src=e},hoverEvent:function(){$(".video-wrap").on("mouseenter",function(){$(".bottomContent").removeClass("tHide").addClass("tShow"),$(".bottom_bg").removeClass("tHide").addClass("tShow")}).on("mouseleave",function(){$(".bottomContent").removeClass("tShow").addClass("tHide"),$(".bottom_bg").removeClass("tShow").addClass("tHide")})},bindEvent:function(){$("body").on("mousedown",function(e){$R.getOffset(e.clientX,e.clientY),$R.mouseDownTime=(new Date).getTime()}).on("mouseup",function(){$R.mouseUpTime=(new Date).getTime()});var e=this,t="off",n=typeof document.createElement("video").canPlayType!="undefined";n||$(".loading").hide(),$("#video").on("play",function(e){$(".coverImg").hide(),$(".loading").hide(),t==="off"?($(".mute-on").hide(),$(".mute-off").show()):t==="on"&&($(".mute-on").show(),$(".mute-off").hide())}),$(".mute-on").on("click",function(e){$("#video")[0].muted=!0,t="off",$(".mute-on").hide(),$(".mute-off").show()}),$(".mute-off").on("click",function(e){$("#video")[0].muted=!1,t="on",$(".mute-on").show(),$(".mute-off").hide()}),$(".video-wrap").on("mousedown",function(t){e.getOffset(t.clientX,t.clientY)}),$(".coverBg,.bottomContent").on("click",function(t){if(t.target.className=="mute-on"||t.target.className=="mute-off")return;var n=$(".video_item").attr("data-clk"),r=$(".video_item").attr("data-curl");e.mouseUpTime=(new Date).getTime(),n&&(n=n.replace("__EVENT_TIME_START__",e.mouseDownTime).replace("__EVENT_TIME_END__",e.mouseUpTime).replace("__OFFSET_X__",parseInt(e.mouseOffset.x)).replace("__OFFSET_Y__",parseInt(e.mouseOffset.y)).replace("__ADSPACE_W__",w).replace("__ADSPACE_H__",h),$.each(n.split(","),function(t,n){e.sendLog(n)})),r=r.replace("__EVENT_TIME_START__",e.mouseDownTime).replace("__EVENT_TIME_END__",e.mouseUpTime).replace("__OFFSET_X__",parseInt(e.mouseOffset.x)).replace("__OFFSET_Y__",parseInt(e.mouseOffset.y)).replace("__ADSPACE_W__",w).replace("__ADSPACE_H__",h),window.open(r,"mediav"+e.mouseUpTime)}),window.addEventListener("message",function(e){e.data=="SEND_AD_IN_VIEW"&&$("#video")[0].play(),e.data=="SEND_AD_OUT_VIEW"&&$("#video")[0].pause()})},getOffset:function(e,t){var n=$("#video-Content")[0].getBoundingClientRect(),r=e-n.left,i=t-n.top;this.mouseOffset={x:r,y:i}}};$R.init();